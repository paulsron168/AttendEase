<div class="cctv-modal-container ">
  <div class="app-spinner" *ngIf="loading">
    <mat-spinner></mat-spinner>
  </div>
  <div mat-dialog-content *ngIf="!loading">
      <div class="confirm-title">
        Attendance Record
        <div class="export-button m-l-12" matTooltip="XLSX">
          <img src="assets/images/icons/xlsx.png" alt="" (click)="exportExcel()" />
        </div>
      </div>
      <mat-divider></mat-divider>
  </div>

  <div mat-dialog-content class="confirm-body" *ngIf="!loading">
    <div class="body overflow-auto">
      <div class="responsive_table">
  
        <table mat-table [dataSource]="select_source" matSort class="mat-cell advance-table">
          <!-- Checkbox Column -->
          <ng-container matColumnDef="select">
            <mat-header-cell *matHeaderCellDef [ngClass]="'tbl-col-width-per-6'">
             
            </mat-header-cell>
            <mat-cell *matCellDef="let row" [ngClass]="'tbl-col-width-per-6'">
             
            </mat-cell>
          </ng-container>
          <!-- ID Column -->
          <ng-container matColumnDef="id">
            <mat-header-cell *matHeaderCellDef mat-sort-header>ID</mat-header-cell>
            <mat-cell *matCellDef="let row">{{row.alert_id}}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="student_id">
            <mat-header-cell *matHeaderCellDef mat-sort-header>Student</mat-header-cell>
           <mat-cell *matCellDef="let row"> <span class="mobile-label">Student ID:</span><img src={{row.student_profile}} width="30px;" height="30px"></mat-cell>
          </ng-container>

          <ng-container matColumnDef="student_name">
            <mat-header-cell *matHeaderCellDef mat-sort-header>Student Name</mat-header-cell>
            <mat-cell *matCellDef="let row"> <span class="mobile-label">Student Name:</span>{{row.student_name}}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="id_number">
            <mat-header-cell *matHeaderCellDef mat-sort-header>ID Number</mat-header-cell>
            <mat-cell *matCellDef="let row"><span class="mobile-label">ID Number:</span>{{row.id_number}}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="is_present">
            <mat-header-cell *matHeaderCellDef mat-sort-header>Attendance</mat-header-cell>
            <mat-cell *matCellDef="let row"><span class="mobile-label">Attendance:</span>{{row.is_present == 2 ? 'Late': row.is_present == 1 ? 'Present' : 'Absent'}}
            </mat-cell>
          </ng-container>
          
          <ng-container matColumnDef="is_present_datetime">
            <mat-header-cell *matHeaderCellDef mat-sort-header>Updated Attendance Datetime</mat-header-cell>
            <mat-cell *matCellDef="let row"><span class="mobile-label">Updated Attendance Datetime:</span>{{addDateTimeHours(row.is_present_datetime) | date:'medium'}}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="is_present_update_display_name">
            <mat-header-cell *matHeaderCellDef mat-sort-header>Updated Attendance By</mat-header-cell>
            <mat-cell *matCellDef="let row"><span class="mobile-label">Updated Attendance By:</span>{{row.is_present_update_display_name}}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="actions">
            <mat-header-cell class="pr-0" *matHeaderCellDef>Actions</mat-header-cell>
            <mat-cell *matCellDef="let row; let i=index;" class="pr-0">
              <button mat-icon-button color="accent"  (click)="editAttendance(row.alert_id)" 
                class="tbl-action-btn" matTooltip="Edit" >
                <app-feather-icons [icon]="'edit'"   [class]="'tbl-fav-edit'"></app-feather-icons>
              </button>
            </mat-cell>
          </ng-container>
          <!-- actions -->

          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <!-- <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row> -->
          <mat-row *matRowDef="let row; columns: displayedColumns;"
            [style.cursor]="'pointer'" matRipple>
          </mat-row>
        </table>
      
        <mat-paginator #paginator [length]="select_source.filteredData.length" [pageIndex]="0" [pageSize]="10"
          [pageSizeOptions]="[5, 10, 25, 100]">
        </mat-paginator>
      </div>
    </div>
      <mat-divider></mat-divider>
      <div mat-dialog-actions class="confirm-buttons">
          <button mat-raised-button class="close-button" (click)="close()">Close</button>
      </div>
  </div> 
  

</div>